import{j as t}from"./query-DCZjxv-P.js";import{r as p}from"./vendor-rrO37E5y.js";import{b as f}from"./formatters-Lk1sxCTq.js";import{R as v,L as y,b as g,X as j,Y as C,T as L,f as w,e as D}from"./charts-DxkWeNkm.js";const N={"2023-24":"var(--year-2023-24)","2024-25":"var(--year-2024-25)","2025-26":"var(--year-2025-26)","2026-27":"var(--year-2026-27)"},R="var(--year-default)";function S(r){return N[r]??R}function A(r){return new Date(r+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}function W({timelines:r,campusKeys:i,height:h=350}){const{chartData:x,years:l}=p.useMemo(()=>{const e=Object.keys(r).sort(),d=e[e.length-1],k=Math.max(...e.map(a=>r[a]?.length||0)),c=[];for(let a=1;a<=k;a++){const o={week:a},u=r[d]?.find(s=>s.weekNumber===a);u?o.dateLabel=A(u.weekStart):o.dateLabel=`Wk ${a}`;for(const s of e){const m=r[s]?.find(n=>n.weekNumber===a);if(m){let n=0;for(const b of i)n+=m.byCampus[b]?.cumulativeEnrollment||0;o[s]=n}}c.push(o)}return{chartData:c,years:e}},[r,i]);return l.length===0?t.jsx("div",{className:"flex items-center justify-center h-32 text-muted-foreground",children:"No timeline data available"}):t.jsx("div",{style:{height:h},children:t.jsx(v,{width:"100%",height:"100%",children:t.jsxs(y,{data:x,children:[t.jsx(g,{strokeDasharray:"3 3",className:"stroke-muted"}),t.jsx(j,{dataKey:"dateLabel",tick:{fill:"var(--muted-foreground)",fontSize:11},interval:"preserveStartEnd",angle:-35,textAnchor:"end",height:50}),t.jsx(C,{tick:{fill:"var(--muted-foreground)"},tickFormatter:e=>f(e)}),t.jsx(L,{contentStyle:{backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"8px"},formatter:(e,d)=>[f(e),d],labelFormatter:e=>String(e)}),t.jsx(w,{}),l.map(e=>t.jsx(D,{type:"monotone",dataKey:e,stroke:S(e),strokeWidth:2,dot:!1,connectNulls:!0},e))]})})})}export{W as C};
