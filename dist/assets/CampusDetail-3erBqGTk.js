import{j as e}from"./query-PEscxNU0.js";import{C as t,a as r,b as n,d as i}from"./card-DqvhlxM4.js";import{c as f,B as h}from"./index-COa4dbVS.js";import{S as a}from"./skeleton-DzxPCil-.js";import{l as g,d as v,b as l,f as b}from"./useDashboardData-IOZz_DkV.js";import{R as C}from"./RetentionGauge-MhfZClCI.js";import{C as w}from"./CampusCumulativeChart-wQWoCp_F.js";import{l as S,k as y,j as k}from"./vendor-rrO37E5y.js";import"./firebase-Cbh-IGzk.js";import"./charts-DxkWeNkm.js";const Y=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],j=f("arrow-left",Y);function z(){const{campusKey:d}=S(),{selectedYear:c}=y(),m=k(),{data:o,isLoading:u,error:p}=g(c,d||""),{data:x,isLoading:N}=v();if(u)return e.jsx(L,{});if(p||!o?.campus)return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(h,{variant:"ghost",onClick:()=>m("/dashboard/campuses"),children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Back to Campuses"]}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"Campus data not available"})})]});const{campus:s}=o;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>m("/dashboard/campuses"),children:e.jsx(j,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.campusName}),e.jsxs("p",{className:"text-muted-foreground",children:["MC Leader: ",s.mcLeader," · ",c]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Total Enrollment"})}),e.jsx(i,{children:e.jsx("p",{className:"text-2xl font-bold",children:l(s.totalEnrollment)})})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Returning Students"})}),e.jsx(i,{children:e.jsx("p",{className:"text-2xl font-bold",children:l(s.returningStudents)})})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"New Students"})}),e.jsx(i,{children:e.jsx("p",{className:"text-2xl font-bold",children:l(s.newStudents)})})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Attendance Rate"})}),e.jsx(i,{children:e.jsx("p",{className:"text-2xl font-bold",children:b(s.attendanceRate)})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(C,{rate:s.retentionRate,returningStudents:s.returningStudents,eligibleStudents:s.returningStudents+s.nonStarters+s.midYearWithdrawals}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(n,{children:"Attrition Breakdown"})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Non-Starters"}),e.jsx("span",{className:"font-medium",children:l(s.nonStarters)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Mid-Year Withdrawals"}),e.jsx("span",{className:"font-medium",children:l(s.midYearWithdrawals)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsx("span",{className:"font-medium",children:"Total Attrition"}),e.jsx("span",{className:"font-bold",children:l(s.nonStarters+s.midYearWithdrawals)})]})]})]})]}),d&&x?.timelines&&e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(n,{children:"Cumulative Enrollment — Year Over Year"})}),e.jsx(i,{children:e.jsx(w,{timelines:x.timelines,campusKeys:[d],height:400})})]}),d&&N&&e.jsx(a,{className:"h-[450px]"})]})}function L(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{className:"h-10 w-10"}),e.jsxs("div",{children:[e.jsx(a,{className:"h-9 w-64"}),e.jsx(a,{className:"h-5 w-48 mt-2"})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((d,c)=>e.jsx(a,{className:"h-24"},c))}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(a,{className:"h-64"}),e.jsx(a,{className:"h-64"})]}),e.jsx(a,{className:"h-[400px]"})]})}export{z as CampusDetailPage};
