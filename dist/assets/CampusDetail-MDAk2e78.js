import{j as e}from"./query-DCZjxv-P.js";import{C as t,a as r,b as n,d as i}from"./card-Cn5l_r2m.js";import{c as f,E as g,m as b,B as h}from"./index-BLNj4MAc.js";import{S as a}from"./skeleton-DuCt1toF.js";import{b as l,f as v}from"./formatters-Lk1sxCTq.js";import{b as C}from"./campus-utils-BB5xlZc1.js";import{R as w}from"./RetentionGauge-DM20_0Lh.js";import{C as S}from"./CampusCumulativeChart-BHCI1XQw.js";import{l as y,k,j as L}from"./vendor-rrO37E5y.js";import"./firebase-Cbh-IGzk.js";import"./charts-DxkWeNkm.js";const Y=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],u=f("arrow-left",Y);function H(){const{campusKey:d}=y(),{selectedYear:c}=k(),m=L(),{data:o,isLoading:j,error:p}=g(c,d||""),{data:x,isLoading:N}=b();if(j)return e.jsx(R,{});if(p||!o?.campus)return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(h,{variant:"ghost",onClick:()=>m("/dashboard/campuses"),children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Back to Campuses"]}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"Campus data not available"})})]});const{campus:s}=o;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>m("/dashboard/campuses"),children:e.jsx(u,{className:"h-4 w-4"})}),e.jsx("div",{children:C(s.campusName)==="micro-campus"?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.mcLeader||"Micro-Campus"}),e.jsxs("p",{className:"text-muted-foreground",children:["Micro-Campus · ",c]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.campusName}),e.jsxs("p",{className:"text-muted-foreground",children:[s.mcLeader&&e.jsxs(e.Fragment,{children:["MC Leader: ",s.mcLeader," · "]}),c]})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Total Enrollment"})}),e.jsx(i,{children:e.jsx("p",{className:"text-2xl font-bold",children:l(s.totalEnrollment)})})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Returning Students"})}),e.jsx(i,{children:e.jsx("p",{className:"text-2xl font-bold",children:l(s.returningStudents)})})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"New Students"})}),e.jsx(i,{children:e.jsx("p",{className:"text-2xl font-bold",children:l(s.newStudents)})})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Attendance Rate"})}),e.jsx(i,{children:e.jsx("p",{className:"text-2xl font-bold",children:v(s.attendanceRate)})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(w,{rate:s.retentionRate,returningStudents:s.returningStudents,eligibleStudents:s.returningStudents+s.nonStarters+s.midYearWithdrawals}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(n,{children:"Attrition Breakdown"})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Non-Starters"}),e.jsx("span",{className:"font-medium",children:l(s.nonStarters)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Mid-Year Withdrawals"}),e.jsx("span",{className:"font-medium",children:l(s.midYearWithdrawals)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsx("span",{className:"font-medium",children:"Total Attrition"}),e.jsx("span",{className:"font-bold",children:l(s.nonStarters+s.midYearWithdrawals)})]})]})]})]}),d&&x?.timelines&&e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(n,{children:"Cumulative Enrollment — Year Over Year"})}),e.jsx(i,{children:e.jsx(S,{timelines:x.timelines,campusKeys:[d],height:400})})]}),d&&N&&e.jsx(a,{className:"h-[450px]"})]})}function R(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{className:"h-10 w-10"}),e.jsxs("div",{children:[e.jsx(a,{className:"h-9 w-64"}),e.jsx(a,{className:"h-5 w-48 mt-2"})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((d,c)=>e.jsx(a,{className:"h-24"},c))}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(a,{className:"h-64"}),e.jsx(a,{className:"h-64"})]}),e.jsx(a,{className:"h-[400px]"})]})}export{H as CampusDetailPage};
