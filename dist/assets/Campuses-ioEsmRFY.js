import{j as e}from"./query-PEscxNU0.js";import{k as L,j as R,r as i}from"./vendor-rrO37E5y.js";import{C as T,a as E,b as B,d as D}from"./card-DFHkfYaO.js";import{T as I,a as _,b as N,c as a,d as H,e as r}from"./table-BEKhT6OB.js";import{I as M}from"./input-B6k9JoJz.js";import{u as O,b as d,f as V,S as m}from"./skeleton-CLlIIbSV.js";import{c as g,B as A}from"./index-Hjcwu6Yr.js";import"./functions-B1hT3L6U.js";import"./firebase-Cbh-IGzk.js";import"./charts-mYDaWYVf.js";const F=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],P=g("arrow-up-down",F);const U=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$=g("search",U);function se(){const{selectedYear:h}=L(),{data:x,isLoading:C,error:v}=O(h),w=R(),[c,y]=i.useState(""),[l,b]=i.useState("totalEnrollment"),[S,u]=i.useState("desc");if(C)return e.jsx(q,{});if(v||!x?.snapshot)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"No campus data available"})});const j=Object.entries(x.snapshot.byCampus).map(([s,t])=>({key:s,...t})).filter(s=>s.campusName.toLowerCase().includes(c.toLowerCase())||s.mcLeader.toLowerCase().includes(c.toLowerCase())).sort((s,t)=>{const o=s[l],p=t[l],f=S==="asc"?1:-1;return typeof o=="string"?f*o.localeCompare(p):f*(o-p)}),k=s=>{l===s?u(t=>t==="asc"?"desc":"asc"):(b(s),u("desc"))},n=({field:s,children:t})=>e.jsxs(A,{variant:"ghost",size:"sm",className:"-ml-3 h-8",onClick:()=>k(s),children:[t,e.jsx(P,{className:"ml-2 h-4 w-4"})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Campuses"}),e.jsxs("p",{className:"text-muted-foreground",children:["Campus-level metrics for ",h," (returning campuses only)"]})]}),e.jsxs(T,{children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{children:"All Campuses"}),e.jsxs("div",{className:"relative w-64",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search campuses...",value:c,onChange:s=>y(s.target.value),className:"pl-9"})]})]})}),e.jsxs(D,{children:[e.jsxs(I,{children:[e.jsx(_,{children:e.jsxs(N,{children:[e.jsx(a,{children:e.jsx(n,{field:"campusName",children:"Campus"})}),e.jsx(a,{children:"MC Leader"}),e.jsx(a,{className:"text-right",children:e.jsx(n,{field:"totalEnrollment",children:"Enrolled"})}),e.jsx(a,{className:"text-right",children:e.jsx(n,{field:"returningStudents",children:"Returning"})}),e.jsx(a,{className:"text-right",children:e.jsx(n,{field:"newStudents",children:"New"})}),e.jsx(a,{className:"text-right",children:e.jsx(n,{field:"retentionRate",children:"Retention"})})]})}),e.jsx(H,{children:j.map(s=>e.jsxs(N,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>w(`/dashboard/campus/${encodeURIComponent(s.key)}`),children:[e.jsx(r,{className:"font-medium",children:s.campusName}),e.jsx(r,{children:s.mcLeader}),e.jsx(r,{className:"text-right",children:d(s.totalEnrollment)}),e.jsx(r,{className:"text-right",children:d(s.returningStudents)}),e.jsx(r,{className:"text-right",children:d(s.newStudents)}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:s.retentionRate>=80?"text-success":s.retentionRate>=60?"text-warning":"text-destructive",children:V(s.retentionRate)})})]},s.key))})]}),j.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No campuses found matching your search"})]})]})]})}function q(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(m,{className:"h-9 w-48"}),e.jsx(m,{className:"h-5 w-64 mt-2"})]}),e.jsx(m,{className:"h-96"})]})}export{se as CampusesPage};
